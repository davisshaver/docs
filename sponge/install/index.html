<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

	<title>Installation - Coral Project Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/code_fixer.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Coral Project Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Home <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../..">About</a>
</li>

                        
                            
<li >
    <a href="../../coral_ecosystem/">Architectural overview</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../quickstart/install/">Installing Coral Ecosystem</a>
</li>

                        
                            
<li >
    <a href="../../quickstart/mongodb/">Setting up MongoDB</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cay</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cay/">Introduction</a>
</li>

        
            
<li >
    <a href="../../cay/install/">Installation</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Elkhorn</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../elkhorn/">Introduction</a>
</li>

        
            
<li >
    <a href="../../elkhorn/install/">Installation</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Pillar</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../pillar/">Introduction</a>
</li>

        
            
<li >
    <a href="../../pillar/install/">Installation</a>
</li>

        
            
<li >
    <a href="../../pillar/api/">API</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Sponge</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../">Introduction</a>
</li>

        
            
<li class="active">
    <a href="./">Installation</a>
</li>

        
            
<li >
    <a href="../included_packages/">Included packages</a>
</li>

        
            
<li >
    <a href="../roadmap/">Roadmap</a>
</li>

        
            
<li >
    <a href="../logging/">Logging</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Xenia</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../xenia/">Introduction</a>
</li>

        
            
<li >
    <a href="../../xenia/install/">Installation</a>
</li>

        
            
<li >
    <a href="../../xenia/api/">API and query management</a>
</li>

        
            
<li >
    <a href="../../xenia/tests/">Testing</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Xenia Driver</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../xenia/xenia-driver-js/">Introduction</a>
</li>

        
            
<li >
    <a href="../../xenia/xenia-driver-js-install/">Installation</a>
</li>

        
            
<li >
    <a href="../../xenia/xenia-driver-js-api/">API</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../contributions/">Introduction</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../contributions/">Introduction</a>
</li>

                        
                            
<li >
    <a href="../../contributions/documentation/writing_documentation/">Writing documentation</a>
</li>

                        
                            
<li >
    <a href="../../contributions/reporting_bugs/">Reporting bugs and requesting features</a>
</li>

                        
                            
<li >
    <a href="../../contributions/supporting_the_community/">Supporting the community</a>
</li>

                        
                            
<li >
    <a href="../../contributions/contributor_license_agreement/">Contributor License Agreement</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">DEVELOPMENT</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../contributions/development/writing_code/">Writing code</a>
</li>

        
            
<li >
    <a href="../../contributions/development/working_with_github/">Development workflow</a>
</li>

        
            
<li >
    <a href="../../contributions/development/code_style/">Coding style</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../faq/">FAQ</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../included_packages/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#installation">Installation</a></li>
        
            <li><a href="#before-you-begin">Before you begin</a></li>
        
            <li><a href="#install-from-source">Install from source</a></li>
        
            <li><a href="#install-as-a-docker-container">Install as a Docker container</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="installation">Installation</h1>
<h2 id="before-you-begin">Before you begin</h2>
<h3 id="pillar">Pillar</h3>
<p>You will need to have an instance of <a href="http://github.com/coralproject/pillar">Pillar</a> running to send the data to. Instructions on installing Pillar <a href="../../pillar/install/">can be found here</a>.</p>
<h3 id="external-database-source">External database source</h3>
<p>You will also have your external database source running. This external database is the source of your existing comment data that will be extracted by Sponge and sent to Pillar, which will then load it into the Coral ecosystem.</p>
<p>The external sources we currently support are: PostgreSQL, MySQL, MongoDB, and REST APIs.</p>
<h3 id="vendoring-dependencies">Vendoring dependencies</h3>
<p>You should be vendoring the packages you choose to use. We recommend using <a href="https://github.com/kardianos/govendor">govendor</a>. This tool will vendor from the vendor folder associated with this project repo for the dependencies in use. It is recommended to use a project based repo with a single vendor folder for all your dependencies.</p>
<h2 id="install-from-source">Install from source</h2>
<h3 id="before-you-begin_1">Before you begin</h3>
<p>If you want to install from source, you will need to have Go installed.</p>
<p>First <a href="https://golang.org/dl/">install Go</a>. The <a href="https://golang.org/doc/install">installation and setup instructions</a> on the Go website are pretty good. Ensure that you have exported your $GOPATH environment variable, as detailed in the <a href="https://golang.org/doc/install">installation instructions</a>.</p>
<p>If you are not on a version of Go that is 1.7 or higher, you will also have to set the GO15VENDOREXPERIMENT flag.</p>
<pre><code>export GO15VENDOREXPERIMENT=1
</code></pre>

<p><em>If you are not on a version of Go 1.7 or higher, we recommend adding this to your ~/.bash_profile or other startup script.</em></p>
<h3 id="get-the-source-code">Get the source code</h3>
<p>You can install the source code via using the <code>go get</code> command, or by manually cloning the code.</p>
<h4 id="using-the-go-get-command">Using the go get command</h4>
<pre><code>go get github.com/coralproject/sponge
</code></pre>

<p>If you see a message about &ldquo;no buildable Go source files&rdquo; like the below, you can ignore it. It simply means that there are buildable source files in subdirectories, just not the uppermost sponge directory.</p>
<pre><code>package github.com/coralproject/sponge: no buildable Go source files in [directory]
</code></pre>

<h4 id="cloning-manually">Cloning manually</h4>
<p>You can also clone the code manually.</p>
<pre><code>mkdir $GOPATH/src/github.com/coralproject/sponge
cd $GOPATH/src/github.com/coralproject/sponge

git clone git@github.com:CoralProject/sponge.git
</code></pre>

<h3 id="set-up-your-strategyjson-file">Set up your strategy.json file</h3>
<p>You can read about <a href="../strategy">strategy files in depth here</a>.</p>
<p>The strategy.json file tells Sponge how to do the transformation between the publisher&rsquo;s existing data and the Coral data schema. It also tells us how to connect to the external publisher&rsquo;s source data. We currently support the following sources: PostgreSQL, MySQL, MongoDB, and REST APIs.</p>
<p>We have example strategy.json files for each of those source types. You can see those example strategy.json files in the <code>examples</code> folder: <code>$GOPATH/src/github.com/coralproject/sponge/examples</code></p>
<p>To copy one of the example strategy.json files to another folder, where you can then customize it:</p>
<pre><code>cp $GOPATH/src/github.com/coralproject/sponge/examples/strategy.json.example $GOPATH/src/github.com/coralproject/sponge/strategy/strategy.json
</code></pre>

<h3 id="set-your-environment-variables">Set your environment variables</h3>
<p>Setting your environment variables tells sponge which strategy file you want to use, and which <a href="https://github.com/coralproject/pillar">Pillar</a> instance you are pushing data into.</p>
<p>Make your own copy of the <code>config/dev.cfg</code> file (you can edit this configuration file with your own values, and then ensure that you don&rsquo;t commit it back to the repository). Call your config file whatever you like; we&rsquo;ll call it &ldquo;custom&rdquo; in this example.</p>
<pre><code>cd $GOPATH/src/github.com/coralproject/sponge
cp config/dev.cfg config/custom.cfg
</code></pre>

<p>Now edit the values in your custom.cfg file:</p>
<pre><code>export STRATEGY_CONF=/path/to/my/strategy.json
export PILLAR_URL=http://localhost:8080
</code></pre>

<ul>
<li>The <code>STRATEGY_CONF</code> variable specifies the path to your strategy.json file.</li>
<li>The <code>PILLAR_URL</code> variable specifies the URL where your Pillar instance is running. If you installed Pillar locally from source, this will probably be <code>http://localhost:8080</code>.</li>
</ul>
<p>Once you&rsquo;ve edited and saved your custom.cfg file, source it:</p>
<pre><code>source $GOPATH/src/github.com/coralproject/sponge/config/custom.cfg
</code></pre>

<h3 id="run-sponge">Run Sponge</h3>
<p>You can either run Sponge using Go, or via a CLI tool.</p>
<h4 id="running-sponge-using-go-run">Running Sponge using go run</h4>
<pre><code>cd $GOPATH/src/github.com/coralproject/sponge/cmd/sponge
go run main.go
</code></pre>

<h4 id="running-sponge-using-the-cli-tool">Running Sponge using the CLI tool</h4>
<p>First build the CLI tool:</p>
<pre><code>cd $GOPATH/src/github.com/coralproject/cmd/cmd/sponge
go build
</code></pre>

<p>Then run the CLI tool</p>
<pre><code>./sponge -h
</code></pre>

<h2 id="install-as-a-docker-container">Install as a Docker container</h2>
<h3 id="building-image">Building image</h3>
<p>To build the docker image run this command:</p>
<pre><code>docker build -t &quot;sponge:latest&quot; -f Dockerfile ./
</code></pre>

<h3 id="edit-envlist">Edit env.list</h3>
<p>The env.list file contains environment variables you need to set. Setting your environment variables tells sponge which strategy file you want to use, and which <a href="https://github.com/coralproject/pillar">Pillar</a> instance you are pushing data into.</p>
<pre><code>PILLAR_URL=http://192.168.99.100:8080
STRATEGY_CONF=/strategy/strategy_psql.json

# DATABASE
# (optional if you want to overwrite strategy file values)
DB_database= &quot;&quot;
DB_username= &quot;&quot;
DB_password= &quot;&quot;
DB_host= &quot;&quot;
DB_port= &quot;&quot;

# WEB SERVICE
# (optional if you want to overwrite strategy file values)
WS_appkey= &quot;&quot;
WS_endpoint= &quot;&quot;
WS_records= &quot;&quot;
WS_pagination= &quot;&quot;
WS_useragent= &quot;&quot;
WS_attributes= &quot;&quot;
</code></pre>

<ul>
<li>The <code>STRATEGY_CONF</code> variable specifies the path to your strategy.json file.</li>
<li>The <code>PILLAR_URL</code> variable specifies the URL where your Pillar instance is running. If you installed Pillar as a Docker container, this will probably be <code>http://192.168.99.100:8080</code>.</li>
</ul>
<h3 id="running-the-container">Running the container</h3>
<p>It will start importing everything setup in the <a href="../strategy">strategy file</a>.</p>
<p><code>docker run --env-file env.list -d sponge</code></p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../site/js/base.js"></script>
        <script src="../../site/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../site/js/highlight.pack.js"></script>
        <script src="../../site/js/jquery-1.10.2.min.js"></script>
        <script src="../../site/mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../site/mkdocs/js/mustache.min.js"></script>
        <script src="../../site/mkdocs/js/require.js"></script>
        <script src="../../site/mkdocs/js/search.js"></script>
        <script src="../../site/mkdocs/js/text.js"></script>
        <script src="../../site/site/js/base.js"></script>
        <script src="../../site/site/js/bootstrap-3.0.3.min.js"></script>
        <script src="../../site/site/js/highlight.pack.js"></script>
        <script src="../../site/site/js/jquery-1.10.2.min.js"></script>
        <script src="../../site/site/mkdocs/js/lunr-0.5.7.min.js"></script>
        <script src="../../site/site/mkdocs/js/mustache.min.js"></script>
        <script src="../../site/site/mkdocs/js/require.js"></script>
        <script src="../../site/site/mkdocs/js/search.js"></script>
        <script src="../../site/site/mkdocs/js/text.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
